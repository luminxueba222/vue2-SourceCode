{"version":3,"file":"vue.js","sources":["../src/compiler/codegen.js","../src/compiler/html-parser.js","../src/compiler/index.js","../src/observe/dep.js","../src/observe/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observe/Array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; //{{name}}\r\nexport function generate(el) {\r\n  let children = genChildren(el);\r\n  // 遍历树  拼接成字符窜\r\n  let code = `_c(\"${el.tag}\",${\r\n    el.attrs.length ? genProps(el.attrs) : \"undefined\"\r\n  }${children ? `,${children}` : \"\"})`;\r\n  //_c('div'),{id:\"app\",a:\"1\",b:\"2\",style:{\"margin\":\" 0px\",\" color\":\" #000\"}},_v(\"word\"+_s(arr)+\"hello\"))\r\n  return code;\r\n}\r\n\r\nfunction genChildren(el) {\r\n  let children = el.children; //获取儿子\r\n  if (children) {\r\n    return children.map((c) => gen(c)).join(\",\");\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction gen(el) {\r\n  if (el.type === 1) {\r\n    return generate(el);\r\n  } else {\r\n    let text = el.text;\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v('${text}')`; //_v()文本\r\n    } else {\r\n      let tokens = [];\r\n      let match;\r\n      let lastIndex = (defaultTagRE.lastIndex = 0);\r\n      while ((match = defaultTagRE.exec(text))) {\r\n        let index = match.index; //开始索引\r\n        if (index > lastIndex) {\r\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n        }\r\n        // tokens.push(JSON.stringify(match[1].trim()));  _s()  原理JSON.stringify()\r\n        tokens.push(`_s(${match[1].trim()})`);\r\n        lastIndex = index + match[0].length;\r\n      }\r\n      if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n      }\r\n      return `_v(${tokens.join(\"+\")})`;\r\n    }\r\n  }\r\n}\r\n\r\nfunction genProps(attrs) {\r\n  //  [{name: \"id\", value: \"app\"},{name: \"a\", value: \"1\"}]\r\n  let str = \"\";\r\n  for (let index = 0; index < attrs.length; index++) {\r\n    let attr = attrs[index];\r\n    if (attr.name === \"style\") {\r\n      let styleObj = {};\r\n      attr.value.replace(/([^;:]+)\\:([^;:]+)/g, function () {\r\n        styleObj[arguments[1]] = arguments[2];\r\n      });\r\n      attr.value = styleObj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n","//<div id=\"app\">{{name}}</div>\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; //标签名\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //获取标签名 div  template.match(new RegExp(qnameCapture)\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配开始标签\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); //  </\r\nconst attribute =\r\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 属性 id=\"app\"\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; //{{name}}\r\n// html字符串  解析成dom树\r\n// vue 是用的正则匹配 (应该逐词解析)\r\nlet root = null; //把解析后的结果组装成树结构\r\nlet stack = []; //利用栈结构组装树结构\r\n\r\n// 逐词解析   把字符串解析出来\r\nexport function parseHTML(html) {\r\n  let index = 0;\r\n  function start(tagName, attributes) {\r\n    let parent = stack[stack.length - 1];\r\n    let element = createASTElement(tagName, attributes);\r\n    // console.log(\"element\", element);\r\n    if (!root) {\r\n      root = element;\r\n    }\r\n    element.parent = parent;\r\n    if (parent) {\r\n      parent.children.push(element);\r\n    }\r\n    stack.push(element);\r\n    // console.log(\"tagName, attributes\", tagName, attributes);\r\n  }\r\n  function end(tagName) {\r\n    // console.log(\"end  tagName\", tagName);\r\n    let last = stack.pop();\r\n    if (last.tag !== tagName) {\r\n      throw new Error(\"标签有误！\");\r\n    }\r\n  }\r\n  function chars(text) {\r\n    text = text.replace(/\\s/g, \"\");\r\n    let parent = stack[stack.length - 1];\r\n    if (text) {\r\n      parent.children.push({\r\n        type: 3,\r\n        text,\r\n      });\r\n    }\r\n  }\r\n\r\n  while (html) {\r\n    let textEnd = html.indexOf(\"<\");\r\n    if (textEnd === 0) {\r\n      const startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n        continue;\r\n      }\r\n      const endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        end(endTagMatch[1]);\r\n        advance(endTagMatch[0].length);\r\n      }\r\n      // return;\r\n    }\r\n    // 处理文本\r\n    let text;\r\n    //{{name}}</div>\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd);\r\n    }\r\n    if (text) {\r\n      chars(text);\r\n      advance(text.length);\r\n    }\r\n  }\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen);\r\n    // console.log(start, \"html\");    (2) [\"<div\", \"div\", index: 0, input: \"<div id=\\\"app\\\">{{name}}</div>\", groups: undefined]0: \"<div\"1: \"div\"groups: undefinedindex: 0input: \"<div id=\\\"app\\\">{{name}}</div>\"length: 2__proto__: Array(0) \"html\"\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: [],\r\n        start: index,\r\n      };\r\n      advance(start[0].length);\r\n      let end, attr;\r\n      while (\r\n        !(end = html.match(startTagClose)) &&\r\n        (attr = html.match(attribute))\r\n      ) {\r\n        attr.start = index;\r\n        // console.log(attr, \"attr\");  [\" id=\\\"app\\\"\", \"id\", \"=\", \"app\", undefined, undefined, index: 0, input: \" id=\\\"app\\\">{{name}}</div>\", groups: undefined, start: 4]0: \" id=\\\"app\\\"\"1: \"id\"2: \"=\"3: \"app\"4: undefined5: undefinedend: 13groups: undefinedindex: 0input: \" id=\\\"app\\\">{{name}}</div>\"start: 4length: 6__proto__: Array(0) \"attr\"\r\n        advance(attr[0].length);\r\n        attr.end = index;\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5] || \"\",\r\n        });\r\n      }\r\n      // >{{name}}</div>   出掉结尾标签  {{name}}</div>\r\n      if (end) {\r\n        advance(end[0].length);\r\n      }\r\n      // console.log(match, \"match\");\r\n      // console.log(html, \"html\");     >{{name}}</div> html\r\n      return match;\r\n    }\r\n  }\r\n  function advance(n) {\r\n    index += n;\r\n    html = html.substring(n);\r\n  }\r\n  return root;\r\n}\r\nexport function createASTElement(tagName, attrs) {\r\n  return {\r\n    type: 1,\r\n    tag: tagName,\r\n    attrs,\r\n    parent: null,\r\n    children: [],\r\n  };\r\n}\r\n","import { generate } from \"./codegen\";\r\nimport { parseHTML } from \"./html-parser\";\r\n\r\nexport function compileToFunctions(template) {\r\n  //  将html词法解析(开始标签  属性  文本)  => ast语法树 用来描述HTML语法的 (利用 stack=[])=>codegen  (_c('div'),{id:\"app\",a:\"1\",b:\"2\",style:{\"margin\":\" 0px\",\" color\":\" #000\"}})=>让字符串执行(字符串转换为代码)\r\n  // =>render 函数 (with+new Function)=>虚拟Dom(增加额外的属性)=>生成真实的Dom\r\n  // 字符串转换为代码  eval  消耗性能  会有作用域的问题\r\n\r\n  let root = parseHTML(template);\r\n  // {type: 1, tag: \"div\", attrs: Array(4), parent: undefined, children: Array(1)}  AST语法树\r\n  let code = generate(root);\r\n  // _c('div'),{id:\"app\",a:\"1\",b:\"2\",style:{\"margin\":\" 0px\",\" color\":\" #000\"}},_c('ul'),undefined,_c('li'),undefined,_v('li111')),_c('li'),undefined,_v('li2222'))),_v(\"word\"+_s(arr)+\"hello\"))\r\n  let render = new Function(`with(this){return ${code}}`);\r\n  // function anonymous(\r\n  //   ) {\r\n  //   with(this){return _c(\"div\",{id:\"app\",a:\"1\",b:\"2\",style:{\"margin\":\" 0px\",\" color\":\" #000\"}},_v(\"word\"+_s(arr)+\"hello\"))}\r\n  //   }\r\n  return render;\r\n}\r\n\r\n// with\r\n// let vm = {arr:[1]}\r\n// with (vm){console.log(arr)}\r\n","let id = 0;\r\nclass Dep {\r\n  //每个属性都分配一个dep dep可以存放watcher   watcher中还要存放dep\r\n  constructor() {\r\n    this.id = id++;\r\n    this.subs = []; //用来存放watcher\r\n  }\r\n  depend() {\r\n    //Dep.target dep里要存放这个watcher watcher要存放dep  多对多的关系\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this);\r\n    }\r\n  }\r\n  addSub(watcher) {\r\n    this.subs.push(watcher);\r\n  }\r\n  notify() {\r\n    this.subs.forEach((watcher) => watcher.update());\r\n  }\r\n}\r\nDep.target = null;\r\nexport function pushTarget(watcher) {\r\n  Dep.target = watcher;\r\n}\r\nexport function popTarget() {\r\n  Dep.target = null;\r\n}\r\nexport default Dep;\r\n","import { popTarget, pushTarget } from \"./dep\";\r\n\r\nlet id = 0;\r\nclass Watcher {\r\n  constructor(vm, exprOrFn, cd, options) {\r\n    this.vm = vm;\r\n    this.exprOrFn = exprOrFn;\r\n    this.cd = cd;\r\n    this.options = options;\r\n    //默认应该执行exprOrFn    exprOrFn  调用render 生成虚拟dom\r\n    this.getter = exprOrFn;\r\n    this.deps = [];\r\n    this.depsId = new Set();\r\n    this.id = id++;\r\n    this.get();\r\n  }\r\n  get() {\r\n    //稍后用户更新时可以重新调用getter方法\r\n    //defineProperty.get  执行\r\n    pushTarget(this);\r\n    this.getter();\r\n    popTarget();\r\n  }\r\n  addDep(dep) {\r\n    let id = dep.id;\r\n    if (!this.depsId.has(id)) {\r\n      this.depsId.add(id);\r\n      this.deps.push(dep);\r\n      dep.addSub(this);\r\n    }\r\n  }\r\n  update() {\r\n    this.get();\r\n  }\r\n}\r\n\r\nexport default Watcher;\r\n","import { vnode } from \".\";\r\n\r\nexport function patch(oldVnode, vnode) {\r\n  if (oldVnode.nodeType == 1) {\r\n    //元素\r\n    //用vnode  来生成真实dom 替换原来的dom元素  insertBefore\r\n    const parentEle = oldVnode.parentNode;\r\n    let elm = createElm(vnode); //根据虚拟节点创建元素\r\n\r\n    parentEle.insertBefore(elm, oldVnode.nextSibling);\r\n    parentEle.removeChild(oldVnode);\r\n    return elm;\r\n  }\r\n}\r\nfunction createElm(vnode) {\r\n  let { tag, data, children, text, vm } = vnode;\r\n  if (typeof tag === \"string\") {\r\n    //元素\r\n    vnode.el = document.createElement(tag); //虚拟节点会有一个el属性  对应真实的节点\r\n    children.forEach((child) => {\r\n      vnode.el.appendChild(createElm(child));\r\n    });\r\n  } else {\r\n    //文本\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el;\r\n}\r\n","import Watcher from \"./observe/watcher\";\r\nimport { patch } from \"./vdom/patch\";\r\n// 后续没过组件渲染的时候都要有一个watcher\r\nexport function mountComponent(vm, el) {\r\n  // 更新函数  数据变化后 会再次调用此函数\r\n  let updateComponent = () => {\r\n    // 调用render 生成虚拟dom\r\n    vm._update(vm._render());\r\n  };\r\n  //观察者模式   属性是 被观察者   刷新页面  是观察者\r\n  // updateComponent();\r\n  new Watcher(\r\n    vm,\r\n    updateComponent,\r\n    () => {\r\n      console.log(\"更新视图了\");\r\n    },\r\n    true\r\n  ); //它是一个渲染watcher  后续还有其它的watcher\r\n}\r\nexport function lifecycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    // 有初始化 和更新\r\n    vm.$el = patch(vm.$el, vnode);\r\n  };\r\n}\r\n","const oldArrayProto = Array.prototype;\r\nexport const arrayMethods = Object.create(oldArrayProto);\r\nconst methods = [\r\n  \"push\",\r\n  \"pop\",\r\n  \"shift\",\r\n  \"unshift\",\r\n  \"splice\",\r\n  \"sort\",\r\n  \"reverse\",\r\n];\r\nmethods.forEach((method) => {\r\n  arrayMethods[method] = function (...args) {\r\n    console.log(\"数组发生变化了\");\r\n    const ob = this.__ob__;\r\n    const result = oldArrayProto[method].call(this, ...args);\r\n    let inserted;\r\n    switch (method) {\r\n      case \"push\":\r\n      case \"unshift\":\r\n        inserted = args;\r\n        break;\r\n      case \"splice\":\r\n        inserted = args.slice(2);\r\n        break;\r\n    }\r\n    console.log(inserted, \"inserted\");\r\n    if (inserted) ob.observeArray(inserted);\r\n    return result;\r\n  };\r\n});\r\n","import { arrayMethods } from \"./Array\";\r\nimport Dep from \"./dep\";\r\n\r\nclass Observer {\r\n  constructor(data) {\r\n    //对对象所有的属性进行劫持\r\n    data.__ob__ = this;\r\n    // 数组劫持\r\n    if (Array.isArray(data)) {\r\n      data.__proto__ = arrayMethods;\r\n      // 如果数组中的是{}需要监控对象的变化\r\n      this.observeArray(data);\r\n    } else {\r\n      // 对象劫持\r\n      this.walk(data);\r\n    }\r\n  }\r\n  /**\r\n   * Observe a obj 对象\r\n   */\r\n  walk(data) {\r\n    const keys = Object.keys(data);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      defineReactive(data, keys[i], data[keys[i]]);\r\n    }\r\n  }\r\n  /**\r\n   * Observe a list Array items 数组\r\n   */\r\n  observeArray(data) {\r\n    data.forEach((item) => {\r\n      observe(item);\r\n    });\r\n  }\r\n}\r\nfunction defineReactive(obj, key, value) {\r\n  // 递归观测对象\r\n  if (key == \"__ob__\") return;\r\n  observe(value);\r\n  let dep = new Dep(); //每个属性都有一个dep属性\r\n  Object.defineProperty(obj, key, {\r\n    get() {\r\n      //取值时我希望watcher和dep的对应起来\r\n      if (Dep.target) {\r\n        //此值是在模板中取的\r\n        dep.depend();\r\n      }\r\n      console.log(key, \"key\", dep);\r\n      return value;\r\n    },\r\n    set(newVal) {\r\n      // 如果赋值是{}继续观测\r\n      if (newVal !== value) {\r\n        dep.notify();\r\n        observe(newVal);\r\n        value = newVal;\r\n      }\r\n    },\r\n  });\r\n}\r\nexport function observe(data) {\r\n  if (typeof data !== \"object\") return;\r\n  if (data.__ob__) return;\r\n  return new Observer(data);\r\n}\r\n","import { observe } from \"./observe/index.js\";\r\n\r\nexport function initState(vm) {\r\n  const opts = vm.$options;\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n}\r\nfunction initData(vm) {\r\n  let data = vm.$options.data;\r\n  // 函数 取返回值\r\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\r\n  // 代理  能直接使用vm.数据\r\n  const keys = Object.keys(data);\r\n  let i = keys.length;\r\n  while (i--) {\r\n    let key = keys[i];\r\n    proxy(vm, `_data`, key);\r\n  }\r\n  observe(data);\r\n}\r\n// 当取vm.数据   就去取vm._data数据\r\nexport function proxy(vm, sourceKey, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[sourceKey][key];\r\n    },\r\n    set(val) {\r\n      vm[sourceKey][key] = val;\r\n    },\r\n  });\r\n}\r\n","import { compileToFunctions } from \"./compiler/index.js\";\r\nimport { mountComponent } from \"./lifecycle.js\";\r\nimport { initState } from \"./state\";\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this;\r\n    vm.$options = options;\r\n    initState(vm);\r\n    if (options.el) {\r\n      vm.$mount(options.el);\r\n    }\r\n  };\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    const options = vm.$options;\r\n    el = document.querySelector(el);\r\n    vm.$el = el;\r\n    // vue 1 直接替换用正则直接替换 template\r\n    // 把模板转换成渲染函数=>虚拟dom=>diff算法 => 更新虚拟dom=>产生真实节点更新\r\n    if (!options.render) {\r\n      let template = options.template;\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n        let render = compileToFunctions(template);\r\n        options.render = render;\r\n      }\r\n    }\r\n    //  options.render  渲染函数   渲染成真实dom 替换页面的内容\r\n    mountComponent(vm, el); //组件的挂载流程\r\n  };\r\n}\r\n","export function createElement(vm, tag, data = {}, ...children) {\r\n  return vnode(vm, tag, data, data.key, children, undefined);\r\n}\r\nexport function createTxetElement(vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\nexport function vnode(vm, tag, data, key, children, text) {\r\n  //虚拟节点：就是一个对象用来描述dom 结构  可以新增自定义的属性\r\n  return {\r\n    vm,\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text,\r\n  };\r\n}\r\n","import { createElement, createTxetElement } from \"./vdom/index\";\r\n\r\nexport function renderMixin(Vue) {\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n    let { render } = vm.$options;\r\n    let vnode = render.call(vm);\r\n    return vnode;\r\n  };\r\n  Vue.prototype._c = function () {\r\n    //createElement\r\n    return createElement(this, ...arguments);\r\n  };\r\n  Vue.prototype._v = function (text) {\r\n    //createTxetElement\r\n    return createTxetElement(this, ...arguments);\r\n  };\r\n  Vue.prototype._s = function (val) {\r\n    if (typeof val == \"object\") return JSON.stringify(val);\r\n    return val;\r\n  };\r\n}\r\n","import { initMixin } from \"./init\";\r\nimport { lifecycleMixin } from \"./lifecycle\";\r\nimport { renderMixin } from \"./render\";\r\nfunction Vue(options) {\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);\r\nlifecycleMixin(Vue); // _update\r\nrenderMixin(Vue); // _render\r\n\r\nexport default Vue;\r\n"],"names":["defaultTagRE","generate","el","children","genChildren","code","tag","attrs","length","genProps","map","c","gen","join","type","text","test","tokens","match","lastIndex","exec","index","push","JSON","stringify","slice","trim","str","attr","name","styleObj","value","replace","arguments","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","root","stack","parseHTML","html","start","tagName","attributes","parent","element","createASTElement","end","last","pop","Error","chars","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","advance","substring","n","compileToFunctions","template","render","Function","id","Dep","subs","target","addDep","watcher","forEach","update","pushTarget","popTarget","Watcher","vm","exprOrFn","cd","options","getter","deps","depsId","Set","get","dep","has","add","addSub","patch","oldVnode","vnode","nodeType","parentEle","parentNode","elm","createElm","insertBefore","nextSibling","removeChild","data","document","createElement","child","appendChild","createTextNode","mountComponent","updateComponent","_update","_render","console","log","lifecycleMixin","Vue","prototype","$el","oldArrayProto","Array","arrayMethods","Object","create","methods","method","ob","__ob__","args","result","call","inserted","observeArray","Observer","isArray","__proto__","walk","keys","i","defineReactive","item","observe","obj","key","defineProperty","depend","set","newVal","notify","initState","opts","$options","initData","_data","proxy","sourceKey","val","initMixin","_init","$mount","querySelector","outerHTML","undefined","createTxetElement","renderMixin","_c","_v","_s"],"mappings":";;;;;;EAAA,IAAMA,YAAY,GAAG,0BAArB;;EACO,SAASC,QAAT,CAAkBC,EAAlB,EAAsB;EAC3B,MAAIC,QAAQ,GAAGC,WAAW,CAACF,EAAD,CAA1B,CAD2B;;EAG3B,MAAIG,IAAI,kBAAUH,EAAE,CAACI,GAAb,gBACNJ,EAAE,CAACK,KAAH,CAASC,MAAT,GAAkBC,QAAQ,CAACP,EAAE,CAACK,KAAJ,CAA1B,GAAuC,WADjC,SAELJ,QAAQ,cAAOA,QAAP,IAAoB,EAFvB,MAAR,CAH2B;;EAO3B,SAAOE,IAAP;EACD;;EAED,SAASD,WAAT,CAAqBF,EAArB,EAAyB;EACvB,MAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB,CADuB;;EAEvB,MAAIA,QAAJ,EAAc;EACZ,WAAOA,QAAQ,CAACO,GAAT,CAAa,UAACC,CAAD;EAAA,aAAOC,GAAG,CAACD,CAAD,CAAV;EAAA,KAAb,EAA4BE,IAA5B,CAAiC,GAAjC,CAAP;EACD;;EACD,SAAO,KAAP;EACD;;EAED,SAASD,GAAT,CAAaV,EAAb,EAAiB;EACf,MAAIA,EAAE,CAACY,IAAH,KAAY,CAAhB,EAAmB;EACjB,WAAOb,QAAQ,CAACC,EAAD,CAAf;EACD,GAFD,MAEO;EACL,QAAIa,IAAI,GAAGb,EAAE,CAACa,IAAd;;EACA,QAAI,CAACf,YAAY,CAACgB,IAAb,CAAkBD,IAAlB,CAAL,EAA8B;EAC5B,2BAAcA,IAAd,QAD4B;EAE7B,KAFD,MAEO;EACL,UAAIE,MAAM,GAAG,EAAb;EACA,UAAIC,KAAJ;EACA,UAAIC,SAAS,GAAInB,YAAY,CAACmB,SAAb,GAAyB,CAA1C;;EACA,aAAQD,KAAK,GAAGlB,YAAY,CAACoB,IAAb,CAAkBL,IAAlB,CAAhB,EAA0C;EACxC,YAAIM,KAAK,GAAGH,KAAK,CAACG,KAAlB,CADwC;;EAExC,YAAIA,KAAK,GAAGF,SAAZ,EAAuB;EACrBF,UAAAA,MAAM,CAACK,IAAP,CAAYC,IAAI,CAACC,SAAL,CAAeT,IAAI,CAACU,KAAL,CAAWN,SAAX,EAAsBE,KAAtB,CAAf,CAAZ;EACD,SAJuC;;;EAMxCJ,QAAAA,MAAM,CAACK,IAAP,cAAkBJ,KAAK,CAAC,CAAD,CAAL,CAASQ,IAAT,EAAlB;EACAP,QAAAA,SAAS,GAAGE,KAAK,GAAGH,KAAK,CAAC,CAAD,CAAL,CAASV,MAA7B;EACD;;EACD,UAAIW,SAAS,GAAGJ,IAAI,CAACP,MAArB,EAA6B;EAC3BS,QAAAA,MAAM,CAACK,IAAP,CAAYC,IAAI,CAACC,SAAL,CAAeT,IAAI,CAACU,KAAL,CAAWN,SAAX,CAAf,CAAZ;EACD;;EACD,0BAAaF,MAAM,CAACJ,IAAP,CAAY,GAAZ,CAAb;EACD;EACF;EACF;;EAED,SAASJ,QAAT,CAAkBF,KAAlB,EAAyB;EACvB;EACA,MAAIoB,GAAG,GAAG,EAAV;;EACA,OAAK,IAAIN,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGd,KAAK,CAACC,MAAlC,EAA0Ca,KAAK,EAA/C,EAAmD;EACjD,QAAIO,IAAI,GAAGrB,KAAK,CAACc,KAAD,CAAhB;;EACA,QAAIO,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;EAAA;EACzB,YAAIC,QAAQ,GAAG,EAAf;EACAF,QAAAA,IAAI,CAACG,KAAL,CAAWC,OAAX,CAAmB,qBAAnB,EAA0C,YAAY;EACpDF,UAAAA,QAAQ,CAACG,SAAS,CAAC,CAAD,CAAV,CAAR,GAAyBA,SAAS,CAAC,CAAD,CAAlC;EACD,SAFD;EAGAL,QAAAA,IAAI,CAACG,KAAL,GAAaD,QAAb;EALyB;EAM1B;;EACDH,IAAAA,GAAG,cAAOC,IAAI,CAACC,IAAZ,cAAoBN,IAAI,CAACC,SAAL,CAAeI,IAAI,CAACG,KAApB,CAApB,MAAH;EACD;;EACD,oBAAWJ,GAAG,CAACF,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAX;EACD;;EC9DD;EACA,IAAMS,MAAM,iCAAZ;;EACA,IAAMC,YAAY,iBAAUD,MAAV,kBAAwBA,MAAxB,MAAlB;;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,EAArB;;EACA,IAAMG,aAAa,GAAG,YAAtB;EACA,IAAMC,MAAM,GAAG,IAAIF,MAAJ,gBAAmBF,YAAnB,YAAf;;EACA,IAAMK,SAAS,GACb,2EADF;EAGA;EACA;;EACA,IAAIC,IAAI,GAAG,IAAX;;EACA,IAAIC,KAAK,GAAG,EAAZ;EAEA;;EACO,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;EAC9B,MAAIvB,KAAK,GAAG,CAAZ;;EACA,WAASwB,KAAT,CAAeC,OAAf,EAAwBC,UAAxB,EAAoC;EAClC,QAAIC,MAAM,GAAGN,KAAK,CAACA,KAAK,CAAClC,MAAN,GAAe,CAAhB,CAAlB;EACA,QAAIyC,OAAO,GAAGC,gBAAgB,CAACJ,OAAD,EAAUC,UAAV,CAA9B,CAFkC;;EAIlC,QAAI,CAACN,IAAL,EAAW;EACTA,MAAAA,IAAI,GAAGQ,OAAP;EACD;;EACDA,IAAAA,OAAO,CAACD,MAAR,GAAiBA,MAAjB;;EACA,QAAIA,MAAJ,EAAY;EACVA,MAAAA,MAAM,CAAC7C,QAAP,CAAgBmB,IAAhB,CAAqB2B,OAArB;EACD;;EACDP,IAAAA,KAAK,CAACpB,IAAN,CAAW2B,OAAX,EAXkC;EAanC;;EACD,WAASE,GAAT,CAAaL,OAAb,EAAsB;EACpB;EACA,QAAIM,IAAI,GAAGV,KAAK,CAACW,GAAN,EAAX;;EACA,QAAID,IAAI,CAAC9C,GAAL,KAAawC,OAAjB,EAA0B;EACxB,YAAM,IAAIQ,KAAJ,CAAU,OAAV,CAAN;EACD;EACF;;EACD,WAASC,KAAT,CAAexC,IAAf,EAAqB;EACnBA,IAAAA,IAAI,GAAGA,IAAI,CAACiB,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP;EACA,QAAIgB,MAAM,GAAGN,KAAK,CAACA,KAAK,CAAClC,MAAN,GAAe,CAAhB,CAAlB;;EACA,QAAIO,IAAJ,EAAU;EACRiC,MAAAA,MAAM,CAAC7C,QAAP,CAAgBmB,IAAhB,CAAqB;EACnBR,QAAAA,IAAI,EAAE,CADa;EAEnBC,QAAAA,IAAI,EAAJA;EAFmB,OAArB;EAID;EACF;;EAED,SAAO6B,IAAP,EAAa;EACX,QAAIY,OAAO,GAAGZ,IAAI,CAACa,OAAL,CAAa,GAAb,CAAd;;EACA,QAAID,OAAO,KAAK,CAAhB,EAAmB;EACjB,UAAME,aAAa,GAAGC,aAAa,EAAnC;;EACA,UAAID,aAAJ,EAAmB;EACjBb,QAAAA,KAAK,CAACa,aAAa,CAACZ,OAAf,EAAwBY,aAAa,CAACnD,KAAtC,CAAL;EACA;EACD;;EACD,UAAMqD,WAAW,GAAGhB,IAAI,CAAC1B,KAAL,CAAWqB,MAAX,CAApB;;EACA,UAAIqB,WAAJ,EAAiB;EACfT,QAAAA,GAAG,CAACS,WAAW,CAAC,CAAD,CAAZ,CAAH;EACAC,QAAAA,OAAO,CAACD,WAAW,CAAC,CAAD,CAAX,CAAepD,MAAhB,CAAP;EACD,OAVgB;;EAYlB,KAdU;;;EAgBX,QAAIO,IAAI,SAAR,CAhBW;;EAkBX,QAAIyC,OAAO,IAAI,CAAf,EAAkB;EAChBzC,MAAAA,IAAI,GAAG6B,IAAI,CAACkB,SAAL,CAAe,CAAf,EAAkBN,OAAlB,CAAP;EACD;;EACD,QAAIzC,IAAJ,EAAU;EACRwC,MAAAA,KAAK,CAACxC,IAAD,CAAL;EACA8C,MAAAA,OAAO,CAAC9C,IAAI,CAACP,MAAN,CAAP;EACD;EACF;;EACD,WAASmD,aAAT,GAAyB;EACvB,QAAMd,KAAK,GAAGD,IAAI,CAAC1B,KAAL,CAAWkB,YAAX,CAAd,CADuB;;EAGvB,QAAIS,KAAJ,EAAW;EACT,UAAM3B,KAAK,GAAG;EACZ4B,QAAAA,OAAO,EAAED,KAAK,CAAC,CAAD,CADF;EAEZtC,QAAAA,KAAK,EAAE,EAFK;EAGZsC,QAAAA,KAAK,EAAExB;EAHK,OAAd;EAKAwC,MAAAA,OAAO,CAAChB,KAAK,CAAC,CAAD,CAAL,CAASrC,MAAV,CAAP;;EACA,UAAI2C,IAAJ,EAASvB,IAAT;;EACA,aACE,EAAEuB,IAAG,GAAGP,IAAI,CAAC1B,KAAL,CAAWoB,aAAX,CAAR,MACCV,IAAI,GAAGgB,IAAI,CAAC1B,KAAL,CAAWsB,SAAX,CADR,CADF,EAGE;EACAZ,QAAAA,IAAI,CAACiB,KAAL,GAAaxB,KAAb,CADA;;EAGAwC,QAAAA,OAAO,CAACjC,IAAI,CAAC,CAAD,CAAJ,CAAQpB,MAAT,CAAP;EACAoB,QAAAA,IAAI,CAACuB,GAAL,GAAW9B,KAAX;EACAH,QAAAA,KAAK,CAACX,KAAN,CAAYe,IAAZ,CAAiB;EACfO,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CADK;EAEfG,UAAAA,KAAK,EAAEH,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD,CAA1B,IAAiC;EAFzB,SAAjB;EAID,OApBQ;;;EAsBT,UAAIuB,IAAJ,EAAS;EACPU,QAAAA,OAAO,CAACV,IAAG,CAAC,CAAD,CAAH,CAAO3C,MAAR,CAAP;EACD,OAxBQ;EA0BT;;;EACA,aAAOU,KAAP;EACD;EACF;;EACD,WAAS2C,OAAT,CAAiBE,CAAjB,EAAoB;EAClB1C,IAAAA,KAAK,IAAI0C,CAAT;EACAnB,IAAAA,IAAI,GAAGA,IAAI,CAACkB,SAAL,CAAeC,CAAf,CAAP;EACD;;EACD,SAAOtB,IAAP;EACD;EACM,SAASS,gBAAT,CAA0BJ,OAA1B,EAAmCvC,KAAnC,EAA0C;EAC/C,SAAO;EACLO,IAAAA,IAAI,EAAE,CADD;EAELR,IAAAA,GAAG,EAAEwC,OAFA;EAGLvC,IAAAA,KAAK,EAALA,KAHK;EAILyC,IAAAA,MAAM,EAAE,IAJH;EAKL7C,IAAAA,QAAQ,EAAE;EALL,GAAP;EAOD;;ECvHM,SAAS6D,kBAAT,CAA4BC,QAA5B,EAAsC;EAC3C;EACA;EACA;EAEA,MAAIxB,IAAI,GAAGE,SAAS,CAACsB,QAAD,CAApB,CAL2C;;EAO3C,MAAI5D,IAAI,GAAGJ,QAAQ,CAACwC,IAAD,CAAnB,CAP2C;;EAS3C,MAAIyB,MAAM,GAAG,IAAIC,QAAJ,6BAAkC9D,IAAlC,OAAb,CAT2C;EAW3C;EACA;EACA;;EACA,SAAO6D,MAAP;EACD;EAGD;EACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECtBA,IAAIE,IAAE,GAAG,CAAT;;MACMC;EACJ;EACA,iBAAc;EAAA;;EACZ,SAAKD,EAAL,GAAUA,IAAE,EAAZ;EACA,SAAKE,IAAL,GAAY,EAAZ,CAFY;EAGb;;;;aACD,kBAAS;EACP;EACA,UAAID,GAAG,CAACE,MAAR,EAAgB;EACdF,QAAAA,GAAG,CAACE,MAAJ,CAAWC,MAAX,CAAkB,IAAlB;EACD;EACF;;;aACD,gBAAOC,OAAP,EAAgB;EACd,WAAKH,IAAL,CAAUhD,IAAV,CAAemD,OAAf;EACD;;;aACD,kBAAS;EACP,WAAKH,IAAL,CAAUI,OAAV,CAAkB,UAACD,OAAD;EAAA,eAAaA,OAAO,CAACE,MAAR,EAAb;EAAA,OAAlB;EACD;;;;;;EAEHN,GAAG,CAACE,MAAJ,GAAa,IAAb;EACO,SAASK,UAAT,CAAoBH,OAApB,EAA6B;EAClCJ,EAAAA,GAAG,CAACE,MAAJ,GAAaE,OAAb;EACD;EACM,SAASI,SAAT,GAAqB;EAC1BR,EAAAA,GAAG,CAACE,MAAJ,GAAa,IAAb;EACD;;ECxBD,IAAIH,EAAE,GAAG,CAAT;;MACMU;EACJ,mBAAYC,EAAZ,EAAgBC,QAAhB,EAA0BC,EAA1B,EAA8BC,OAA9B,EAAuC;EAAA;;EACrC,SAAKH,EAAL,GAAUA,EAAV;EACA,SAAKC,QAAL,GAAgBA,QAAhB;EACA,SAAKC,EAAL,GAAUA,EAAV;EACA,SAAKC,OAAL,GAAeA,OAAf,CAJqC;;EAMrC,SAAKC,MAAL,GAAcH,QAAd;EACA,SAAKI,IAAL,GAAY,EAAZ;EACA,SAAKC,MAAL,GAAc,IAAIC,GAAJ,EAAd;EACA,SAAKlB,EAAL,GAAUA,EAAE,EAAZ;EACA,SAAKmB,GAAL;EACD;;;;aACD,eAAM;EACJ;EACA;EACAX,MAAAA,UAAU,CAAC,IAAD,CAAV;EACA,WAAKO,MAAL;EACAN,MAAAA,SAAS;EACV;;;aACD,gBAAOW,GAAP,EAAY;EACV,UAAIpB,EAAE,GAAGoB,GAAG,CAACpB,EAAb;;EACA,UAAI,CAAC,KAAKiB,MAAL,CAAYI,GAAZ,CAAgBrB,EAAhB,CAAL,EAA0B;EACxB,aAAKiB,MAAL,CAAYK,GAAZ,CAAgBtB,EAAhB;EACA,aAAKgB,IAAL,CAAU9D,IAAV,CAAekE,GAAf;EACAA,QAAAA,GAAG,CAACG,MAAJ,CAAW,IAAX;EACD;EACF;;;aACD,kBAAS;EACP,WAAKJ,GAAL;EACD;;;;;;EC/BI,SAASK,KAAT,CAAeC,QAAf,EAAyBC,KAAzB,EAAgC;EACrC,MAAID,QAAQ,CAACE,QAAT,IAAqB,CAAzB,EAA4B;EAC1B;EACA;EACA,QAAMC,SAAS,GAAGH,QAAQ,CAACI,UAA3B;EACA,QAAIC,GAAG,GAAGC,SAAS,CAACL,KAAD,CAAnB,CAJ0B;;EAM1BE,IAAAA,SAAS,CAACI,YAAV,CAAuBF,GAAvB,EAA4BL,QAAQ,CAACQ,WAArC;EACAL,IAAAA,SAAS,CAACM,WAAV,CAAsBT,QAAtB;EACA,WAAOK,GAAP;EACD;EACF;;EACD,SAASC,SAAT,CAAmBL,KAAnB,EAA0B;EACxB,MAAMxF,GAAN,GAAwCwF,KAAxC,CAAMxF,GAAN;EAAA,MAAwCwF,KAAxC,CAAWS,IAAX;EAAA,UAAiBpG,QAAjB,GAAwC2F,KAAxC,CAAiB3F,QAAjB;EAAA,MAA2BY,IAA3B,GAAwC+E,KAAxC,CAA2B/E,IAA3B;EAAA,MAAwC+E,KAAxC,CAAiCf;;EACjC,MAAI,OAAOzE,GAAP,KAAe,QAAnB,EAA6B;EAC3B;EACAwF,IAAAA,KAAK,CAAC5F,EAAN,GAAWsG,QAAQ,CAACC,aAAT,CAAuBnG,GAAvB,CAAX,CAF2B;;EAG3BH,IAAAA,QAAQ,CAACuE,OAAT,CAAiB,UAACgC,KAAD,EAAW;EAC1BZ,MAAAA,KAAK,CAAC5F,EAAN,CAASyG,WAAT,CAAqBR,SAAS,CAACO,KAAD,CAA9B;EACD,KAFD;EAGD,GAND,MAMO;EACL;EACAZ,IAAAA,KAAK,CAAC5F,EAAN,GAAWsG,QAAQ,CAACI,cAAT,CAAwB7F,IAAxB,CAAX;EACD;;EACD,SAAO+E,KAAK,CAAC5F,EAAb;EACD;;ECxBM,SAAS2G,cAAT,CAAwB9B,EAAxB,EAA4B7E,EAA5B,EAAgC;EACrC;EACA,MAAI4G,eAAe,GAAG,SAAlBA,eAAkB,GAAM;EAC1B;EACA/B,IAAAA,EAAE,CAACgC,OAAH,CAAWhC,EAAE,CAACiC,OAAH,EAAX;EACD,GAHD,CAFqC;EAOrC;;;EACA,MAAIlC,OAAJ,CACEC,EADF,EAEE+B,eAFF,EAGE,YAAM;EACJG,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;EACD,GALH,EAME,IANF,EARqC;EAgBtC;EACM,SAASC,cAAT,CAAwBC,GAAxB,EAA6B;EAClCA,EAAAA,GAAG,CAACC,SAAJ,CAAcN,OAAd,GAAwB,UAAUjB,KAAV,EAAiB;EACvC,QAAMf,EAAE,GAAG,IAAX,CADuC;;EAGvCA,IAAAA,EAAE,CAACuC,GAAH,GAAS1B,KAAK,CAACb,EAAE,CAACuC,GAAJ,EAASxB,KAAT,CAAd;EACD,GAJD;EAKD;;EC1BD,IAAMyB,aAAa,GAAGC,KAAK,CAACH,SAA5B;EACO,IAAMI,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAcJ,aAAd,CAArB;EACP,IAAMK,OAAO,GAAG,CACd,MADc,EAEd,KAFc,EAGd,OAHc,EAId,SAJc,EAKd,QALc,EAMd,MANc,EAOd,SAPc,CAAhB;EASAA,OAAO,CAAClD,OAAR,CAAgB,UAACmD,MAAD,EAAY;EAC1BJ,EAAAA,YAAY,CAACI,MAAD,CAAZ,GAAuB,YAAmB;EAAA;;EACxCZ,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;EACA,QAAMY,EAAE,GAAG,KAAKC,MAAhB;;EAFwC,sCAANC,IAAM;EAANA,MAAAA,IAAM;EAAA;;EAGxC,QAAMC,MAAM,GAAG,yBAAAV,aAAa,CAACM,MAAD,CAAb,EAAsBK,IAAtB,+BAA2B,IAA3B,SAAoCF,IAApC,EAAf;;EACA,QAAIG,QAAJ;;EACA,YAAQN,MAAR;EACE,WAAK,MAAL;EACA,WAAK,SAAL;EACEM,QAAAA,QAAQ,GAAGH,IAAX;EACA;;EACF,WAAK,QAAL;EACEG,QAAAA,QAAQ,GAAGH,IAAI,CAACvG,KAAL,CAAW,CAAX,CAAX;EACA;EAPJ;;EASAwF,IAAAA,OAAO,CAACC,GAAR,CAAYiB,QAAZ,EAAsB,UAAtB;EACA,QAAIA,QAAJ,EAAcL,EAAE,CAACM,YAAH,CAAgBD,QAAhB;EACd,WAAOF,MAAP;EACD,GAjBD;EAkBD,CAnBD;;MCRMI;EACJ,oBAAY9B,IAAZ,EAAkB;EAAA;;EAChB;EACAA,IAAAA,IAAI,CAACwB,MAAL,GAAc,IAAd,CAFgB;;EAIhB,QAAIP,KAAK,CAACc,OAAN,CAAc/B,IAAd,CAAJ,EAAyB;EACvBA,MAAAA,IAAI,CAACgC,SAAL,GAAiBd,YAAjB,CADuB;;EAGvB,WAAKW,YAAL,CAAkB7B,IAAlB;EACD,KAJD,MAIO;EACL;EACA,WAAKiC,IAAL,CAAUjC,IAAV;EACD;EACF;EACD;EACF;EACA;;;;;aACE,cAAKA,IAAL,EAAW;EACT,UAAMkC,IAAI,GAAGf,MAAM,CAACe,IAAP,CAAYlC,IAAZ,CAAb;;EACA,WAAK,IAAImC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACjI,MAAzB,EAAiCkI,CAAC,EAAlC,EAAsC;EACpCC,QAAAA,cAAc,CAACpC,IAAD,EAAOkC,IAAI,CAACC,CAAD,CAAX,EAAgBnC,IAAI,CAACkC,IAAI,CAACC,CAAD,CAAL,CAApB,CAAd;EACD;EACF;EACD;EACF;EACA;;;;aACE,sBAAanC,IAAb,EAAmB;EACjBA,MAAAA,IAAI,CAAC7B,OAAL,CAAa,UAACkE,IAAD,EAAU;EACrBC,QAAAA,OAAO,CAACD,IAAD,CAAP;EACD,OAFD;EAGD;;;;;;EAEH,SAASD,cAAT,CAAwBG,GAAxB,EAA6BC,GAA7B,EAAkChH,KAAlC,EAAyC;EACvC;EACA,MAAIgH,GAAG,IAAI,QAAX,EAAqB;EACrBF,EAAAA,OAAO,CAAC9G,KAAD,CAAP;EACA,MAAIyD,GAAG,GAAG,IAAInB,GAAJ,EAAV,CAJuC;;EAKvCqD,EAAAA,MAAM,CAACsB,cAAP,CAAsBF,GAAtB,EAA2BC,GAA3B,EAAgC;EAC9BxD,IAAAA,GAD8B,iBACxB;EACJ;EACA,UAAIlB,GAAG,CAACE,MAAR,EAAgB;EACd;EACAiB,QAAAA,GAAG,CAACyD,MAAJ;EACD;;EACDhC,MAAAA,OAAO,CAACC,GAAR,CAAY6B,GAAZ,EAAiB,KAAjB,EAAwBvD,GAAxB;EACA,aAAOzD,KAAP;EACD,KAT6B;EAU9BmH,IAAAA,GAV8B,eAU1BC,MAV0B,EAUlB;EACV;EACA,UAAIA,MAAM,KAAKpH,KAAf,EAAsB;EACpByD,QAAAA,GAAG,CAAC4D,MAAJ;EACAP,QAAAA,OAAO,CAACM,MAAD,CAAP;EACApH,QAAAA,KAAK,GAAGoH,MAAR;EACD;EACF;EAjB6B,GAAhC;EAmBD;;EACM,SAASN,OAAT,CAAiBtC,IAAjB,EAAuB;EAC5B,MAAI,QAAOA,IAAP,MAAgB,QAApB,EAA8B;EAC9B,MAAIA,IAAI,CAACwB,MAAT,EAAiB;EACjB,SAAO,IAAIM,QAAJ,CAAa9B,IAAb,CAAP;EACD;;EC9DM,SAAS8C,SAAT,CAAmBtE,EAAnB,EAAuB;EAC5B,MAAMuE,IAAI,GAAGvE,EAAE,CAACwE,QAAhB;;EACA,MAAID,IAAI,CAAC/C,IAAT,EAAe;EACbiD,IAAAA,QAAQ,CAACzE,EAAD,CAAR;EACD;EACF;;EACD,SAASyE,QAAT,CAAkBzE,EAAlB,EAAsB;EACpB,MAAIwB,IAAI,GAAGxB,EAAE,CAACwE,QAAH,CAAYhD,IAAvB,CADoB;;EAGpBA,EAAAA,IAAI,GAAGxB,EAAE,CAAC0E,KAAH,GAAW,OAAOlD,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAAC2B,IAAL,CAAUnD,EAAV,CAA7B,GAA6CwB,IAA/D,CAHoB;;EAKpB,MAAMkC,IAAI,GAAGf,MAAM,CAACe,IAAP,CAAYlC,IAAZ,CAAb;EACA,MAAImC,CAAC,GAAGD,IAAI,CAACjI,MAAb;;EACA,SAAOkI,CAAC,EAAR,EAAY;EACV,QAAIK,GAAG,GAAGN,IAAI,CAACC,CAAD,CAAd;EACAgB,IAAAA,KAAK,CAAC3E,EAAD,WAAcgE,GAAd,CAAL;EACD;;EACDF,EAAAA,OAAO,CAACtC,IAAD,CAAP;EACD;;;EAEM,SAASmD,KAAT,CAAe3E,EAAf,EAAmB4E,SAAnB,EAA8BZ,GAA9B,EAAmC;EACxCrB,EAAAA,MAAM,CAACsB,cAAP,CAAsBjE,EAAtB,EAA0BgE,GAA1B,EAA+B;EAC7BxD,IAAAA,GAD6B,iBACvB;EACJ,aAAOR,EAAE,CAAC4E,SAAD,CAAF,CAAcZ,GAAd,CAAP;EACD,KAH4B;EAI7BG,IAAAA,GAJ6B,eAIzBU,GAJyB,EAIpB;EACP7E,MAAAA,EAAE,CAAC4E,SAAD,CAAF,CAAcZ,GAAd,IAAqBa,GAArB;EACD;EAN4B,GAA/B;EAQD;;EC3BM,SAASC,SAAT,CAAmBzC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACC,SAAJ,CAAcyC,KAAd,GAAsB,UAAU5E,OAAV,EAAmB;EACvC,QAAMH,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACwE,QAAH,GAAcrE,OAAd;EACAmE,IAAAA,SAAS,CAACtE,EAAD,CAAT;;EACA,QAAIG,OAAO,CAAChF,EAAZ,EAAgB;EACd6E,MAAAA,EAAE,CAACgF,MAAH,CAAU7E,OAAO,CAAChF,EAAlB;EACD;EACF,GAPD;;EAQAkH,EAAAA,GAAG,CAACC,SAAJ,CAAc0C,MAAd,GAAuB,UAAU7J,EAAV,EAAc;EACnC,QAAM6E,EAAE,GAAG,IAAX;EACA,QAAMG,OAAO,GAAGH,EAAE,CAACwE,QAAnB;EACArJ,IAAAA,EAAE,GAAGsG,QAAQ,CAACwD,aAAT,CAAuB9J,EAAvB,CAAL;EACA6E,IAAAA,EAAE,CAACuC,GAAH,GAASpH,EAAT,CAJmC;EAMnC;;EACA,QAAI,CAACgF,OAAO,CAAChB,MAAb,EAAqB;EACnB,UAAID,QAAQ,GAAGiB,OAAO,CAACjB,QAAvB;;EACA,UAAI,CAACA,QAAD,IAAa/D,EAAjB,EAAqB;EACnB+D,QAAAA,QAAQ,GAAG/D,EAAE,CAAC+J,SAAd;EACA,YAAI/F,MAAM,GAAGF,kBAAkB,CAACC,QAAD,CAA/B;EACAiB,QAAAA,OAAO,CAAChB,MAAR,GAAiBA,MAAjB;EACD;EACF,KAdkC;;;EAgBnC2C,IAAAA,cAAc,CAAC9B,EAAD,CAAd,CAhBmC;EAiBpC,GAjBD;EAkBD;;EC/BM,SAAS0B,aAAT,CAAuB1B,EAAvB,EAA2BzE,GAA3B,EAAwD;EAAA,MAAxBiG,IAAwB,uEAAjB,EAAiB;;EAAA,oCAAVpG,QAAU;EAAVA,IAAAA,QAAU;EAAA;;EAC7D,SAAO2F,KAAK,CAACf,EAAD,EAAKzE,GAAL,EAAUiG,IAAV,EAAgBA,IAAI,CAACwC,GAArB,EAA0B5I,QAA1B,EAAoC+J,SAApC,CAAZ;EACD;EACM,SAASC,iBAAT,CAA2BpF,EAA3B,EAA+BhE,IAA/B,EAAqC;EAC1C,SAAO+E,KAAK,CAACf,EAAD,EAAKmF,SAAL,EAAgBA,SAAhB,EAA2BA,SAA3B,EAAsCA,SAAtC,EAAiDnJ,IAAjD,CAAZ;EACD;EAEM,SAAS+E,KAAT,CAAef,EAAf,EAAmBzE,GAAnB,EAAwBiG,IAAxB,EAA8BwC,GAA9B,EAAmC5I,QAAnC,EAA6CY,IAA7C,EAAmD;EACxD;EACA,SAAO;EACLgE,IAAAA,EAAE,EAAFA,EADK;EAELzE,IAAAA,GAAG,EAAHA,GAFK;EAGLiG,IAAAA,IAAI,EAAJA,IAHK;EAILwC,IAAAA,GAAG,EAAHA,GAJK;EAKL5I,IAAAA,QAAQ,EAARA,QALK;EAMLY,IAAAA,IAAI,EAAJA;EANK,GAAP;EAQD;;ECfM,SAASqJ,WAAT,CAAqBhD,GAArB,EAA0B;EAC/BA,EAAAA,GAAG,CAACC,SAAJ,CAAcL,OAAd,GAAwB,YAAY;EAClC,QAAMjC,EAAE,GAAG,IAAX;EACA,QAAMb,MAAN,GAAiBa,EAAE,CAACwE,QAApB,CAAMrF,MAAN;EACA,QAAI4B,KAAK,GAAG5B,MAAM,CAACgE,IAAP,CAAYnD,EAAZ,CAAZ;EACA,WAAOe,KAAP;EACD,GALD;;EAMAsB,EAAAA,GAAG,CAACC,SAAJ,CAAcgD,EAAd,GAAmB,YAAY;EAC7B;EACA,WAAO5D,aAAa,MAAb,UAAc,IAAd,oCAAuBxE,SAAvB,GAAP;EACD,GAHD;;EAIAmF,EAAAA,GAAG,CAACC,SAAJ,CAAciD,EAAd,GAAmB,UAAUvJ,IAAV,EAAgB;EACjC;EACA,WAAOoJ,iBAAiB,MAAjB,UAAkB,IAAlB,oCAA2BlI,SAA3B,GAAP;EACD,GAHD;;EAIAmF,EAAAA,GAAG,CAACC,SAAJ,CAAckD,EAAd,GAAmB,UAAUX,GAAV,EAAe;EAChC,QAAI,QAAOA,GAAP,KAAc,QAAlB,EAA4B,OAAOrI,IAAI,CAACC,SAAL,CAAeoI,GAAf,CAAP;EAC5B,WAAOA,GAAP;EACD,GAHD;EAID;;EClBD,SAASxC,GAAT,CAAalC,OAAb,EAAsB;EACpB,OAAK4E,KAAL,CAAW5E,OAAX;EACD;;EAED2E,SAAS,CAACzC,GAAD,CAAT;EACAD,cAAc,CAACC,GAAD,CAAd;;EACAgD,WAAW,CAAChD,GAAD,CAAX;;;;;;;;"}